(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,n){e.exports=n.p+"static/media/loading.c5590569.svg"},59:function(e,t,n){e.exports=n(84)},64:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(29),r=n.n(a),l=n(0),o=n.n(l),c=n(89),i=(n(64),n(23)),u=n.n(i),s=n(34),d=n(4),m=n(45),p=n(46),f=n.n(p),v=n(47),g=n.n(v),E=function(){return o.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}},o.a.createElement("img",{src:g.a,alt:"loading"}))},b=n(90),h=function(){var e=ne(),t=e.loading,n=e.loginWithRedirect;return t?o.a.createElement("div",null,"Loading..."):o.a.createElement("div",{className:"overlay"},o.a.createElement("div",{className:"overlay-content"},o.a.createElement("div",{className:"overlay-heading"},"Welcome to the GraphQL tutorial app"),o.a.createElement("div",{className:"overlay-message"},"Please login to continue"),o.a.createElement("div",{className:"overlay-action"},o.a.createElement(b.a,{id:"qsLoginBtn",variant:"primary",className:"btn-margin loginBtn",onClick:function(){n({})}},"Log In"))))},y=n(88),k=function(e){var t=e.logoutHandler;return o.a.createElement(b.a,{id:"qsLogoutBtn",variant:"primary",className:"btn-margin logoutBtn",onClick:t},"Log Out")},w=function(e){var t=e.logoutHandler;return o.a.createElement(y.a,{className:"justify-content-between"},o.a.createElement(y.a.Brand,null,"GraphQL Tutorial App"),o.a.createElement(y.a.Collapse,{className:"justify-content-end"},o.a.createElement(k,{logoutHandler:t})))},j=n(57),O=n(19),N=n(20),C=n.n(N),_=n(18),T=n(33);function x(){var e=Object(O.a)(["\n        mutation toggleTodo($id: Int!, $isCompleted: Boolean!) {\n            update_todos(\n                where: { id: { _eq: $id } }\n                _set: { is_completed: $isCompleted }\n            ) {\n                affected_rows\n            }\n        }\n    "]);return x=function(){return e},e}function P(){var e=Object(O.a)(["\n        mutation removeTodo($id: Int!) {\n            delete_todos(where: { id: { _eq: $id } }) {\n                affected_rows\n            }\n        }\n    "]);return P=function(){return e},e}var q=function(e){e.index;var t=e.todo,n=C()(P()),a=Object(_.a)(n),r=Object(d.a)(a,1)[0],l=C()(x()),c=Object(_.a)(l),i=Object(d.a)(c,1)[0];return o.a.createElement("li",null,o.a.createElement("div",{className:"view"},o.a.createElement("div",{className:"round"},o.a.createElement("input",{checked:t.is_completed,type:"checkbox",id:t.id,onChange:function(){i({variables:{id:t.id,isCompleted:!t.is_completed},optimisticResponse:null,update:function(e){var n=e.readQuery({query:R}).todos.map(function(e){return e.id===t.id?Object(T.a)({},e,{is_completed:!e.is_completed}):e});e.writeQuery({query:R,data:{todos:n}})}})}}),o.a.createElement("label",{htmlFor:t.id}))),o.a.createElement("div",{className:"labelContent"+(t.is_completed?" completed":"")},o.a.createElement("div",null,t.title)),o.a.createElement("button",{className:"closeBtn",onClick:function(e){e.preventDefault(),e.stopPropagation(),r({variables:{id:t.id},optimisticResponse:null,update:function(e){var n=e.readQuery({query:R}).todos.filter(function(e){return e.id!==t.id});e.writeQuery({query:R,data:{todos:n}})}})}},"x"))},S=function(e){var t=e.todos,n=e.currentFilter,a=e.filterResultsFn,r=e.clearCompletedFn,l=function(e){return function(){a(e)}},c=o.a.createElement("button",{onClick:r,className:"clearComp"},"Clear completed"),i=t.filter(function(e){return!0!==e.is_completed}),u=t.length;return"active"===n?u=i.length:"completed"===n&&(u=t.length-i.length),o.a.createElement("div",{className:"footerList"},o.a.createElement("span",null," ",u," item",1!==u?"s":""),o.a.createElement("ul",null,o.a.createElement("li",{onClick:l("all")},o.a.createElement("a",{className:"all"===n?"selected":""},"All")),o.a.createElement("li",{onClick:l("active")},o.a.createElement("a",{className:"active"===n?"selected":""},"Active")),o.a.createElement("li",{onClick:l("completed")},o.a.createElement("a",{className:"completed"===n?"selected":""},"Completed"))),c)};function W(){var e=Object(O.a)(["\n    mutation clearCompleted {\n        delete_todos(\n            where: { is_completed: { _eq: true }, is_public: { _eq: false } }\n        ) {\n            affected_rows\n        }\n    }\n"]);return W=function(){return e},e}function I(){var e=Object(O.a)(["\n    query getMyTodos {\n        todos(\n            where: { is_public: { _eq: false } }\n            order_by: { created_at: desc }\n        ) {\n            id\n            title\n            created_at\n            is_completed\n        }\n    }\n"]);return I=function(){return e},e}var R=C()(I()),L=C()(W()),B=function(e){var t=Object(l.useState)({filter:"all",clearInProgress:!1}),n=Object(d.a)(t,2),a=n[0],r=n[1],c=Object(_.a)(L),i=Object(d.a)(c,1)[0],u=e.todos,s=u;"active"===a.filter?s=u.filter(function(e){return!0!==e.is_completed}):"completed"===a.filter&&(s=u.filter(function(e){return!0===e.is_completed}));var m=[];return s.forEach(function(e,t){m.push(o.a.createElement(q,{key:t,index:t,todo:e}))}),o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"todoListWrapper"},o.a.createElement("ul",null,m)),o.a.createElement(S,{todos:s,currentFilter:a.filter,filterResultsFn:function(e){r(Object(T.a)({},a,{filter:e}))},clearCompletedFn:function(){i({optimisticResponse:null,update:function(e,t){t.data;var n=e.readQuery({query:R}).todos.filter(function(e){return!e.is_completed});e.writeQuery({query:R,data:{todos:n}})}})},clearInProgress:a.clearInProgress}))},F=function(){var e=Object(_.b)(R),t=e.loading,n=e.error,a=e.data;return t?o.a.createElement("div",null,"Loading..."):n?(console.error(n),o.a.createElement("div",null,"Error!")):o.a.createElement(B,{todos:a.todos})};function U(){var e=Object(O.a)(["\n    mutation($todo: String!, $isPublic: Boolean!) {\n        insert_todos(objects: { title: $todo, is_public: $isPublic }) {\n            affected_rows\n            returning {\n                id\n                title\n                created_at\n                is_completed\n            }\n        }\n    }\n"]);return U=function(){return e},e}var Q=C()(U()),A=function(e){var t=e.isPublic,n=void 0!==t&&t,a=Object(l.useState)(""),r=Object(d.a)(a,2),c=r[0],i=r[1],u=Object(_.a)(Q,{update:function(e,t){var a=t.data;if(n)return null;var r=e.readQuery({query:R}),l=a.insert_todos.returning[0];e.writeQuery({query:R,data:{todos:[l].concat(Object(j.a)(r.todos))}})},onCompleted:function(){i("")}}),s=Object(d.a)(u,1)[0];return o.a.createElement("form",{className:"formInput",onSubmit:function(e){e.preventDefault(),s({variables:{todo:c,isPublic:n}})}},o.a.createElement("input",{className:"input",placeholder:"What needs to be done?",value:c,onChange:function(e){return i(e.target.value)},ref:function(e){return e},required:!0}),o.a.createElement("i",{className:"inputMarker fa fa-angle-right"}))},$=function(){return o.a.createElement("div",{className:"todoWrapper"},o.a.createElement("div",{className:"sectionHeader"},"Personal todos"),o.a.createElement(A,null),o.a.createElement(F,null))},H=function(e){e.index;var t=e.todo;return o.a.createElement("li",null,o.a.createElement("div",{className:"userInfoPublic",title:t.user.name},"@",t.user.name),o.a.createElement("div",{className:"labelContent"+(t.is_completed?" completed":"")},o.a.createElement("div",null,t.title)))},M=function(e){var t={olderTodosAvailable:!0,newTodosCount:1,todos:[{id:"1",title:"This is public todo 1",user:{name:"someUser1"}},{id:"2",title:"This is public todo 2",is_completed:!1,is_public:!0,user:{name:"someUser2"}},{id:"3",title:"This is public todo 3",user:{name:"someUser3"}},{id:"4",title:"This is public todo 4",user:{name:"someUser4"}}]},n=t.todos,a=o.a.createElement("ul",null,n.map(function(e,t){return o.a.createElement(H,{key:t,index:t,todo:e})})),r="";t.newTodosCount&&(r=o.a.createElement("div",{className:"loadMoreSection",onClick:function(){}},"New tasks have arrived! (",t.newTodosCount.toString(),")"));var c=o.a.createElement("div",{className:"loadMoreSection",onClick:function(){}},t.olderTodosAvailable?"Load older tasks":"No more public tasks!");return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"todoListWrapper"},r,a,c))},z=function(){return o.a.createElement("div",{className:"todoWrapper"},o.a.createElement("div",{className:"sectionHeader"},"Public feed (realtime)"),o.a.createElement(A,{isPublic:!0}),o.a.createElement(M,null))};var G=function(e){var t=e.rows,n=e.cols,a=e.value,r=e.limit,c=Object(l.useState)(a),i=Object(d.a)(c,2),u=i[0],s=i[1],m=Object(l.useState)(0),p=Object(d.a)(m,2),f=p[0],v=p[1],g=function(e){var t=e.split(" ");t.filter(Boolean).length>r?(s(e.split(" ").slice(0,r).join(" ")),v(r)):(s(e),v(t.filter(Boolean).length))};return o.a.useEffect(function(){g(u)},[]),o.a.createElement("div",null,o.a.createElement("textarea",{rows:t,cols:n,onChange:function(e){return g(e.target.value)},value:u,placeholder:"This is test component"}),o.a.createElement("p",null,f,"/",r))},J=function(e){var t=e.user;return o.a.createElement("div",{className:"userInfo"},o.a.createElement("div",{className:"userImg"},o.a.createElement("i",{className:"far fa-user"})),o.a.createElement("div",{className:"userName"},t.name))},D=function(){var e=[{name:"someUser1"},{name:"someUser2"}],t=[];return e.forEach(function(e,n){t.push(o.a.createElement(J,{key:n,index:n,user:e}))}),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"onlineUsersWrapper"},o.a.createElement("div",{className:"sliderHeader"},"Online users - ",e.length),t),o.a.createElement(G,{limit:5,value:"Hello there!"}),",")},V=n(22),K=n(56),X=n(58),Y=n(7),Z=function(e){var t=e.idToken,n=ne(),a=n.loading,r=n.logout;if(a)return o.a.createElement("div",null,"Loading...");var l,c=(l=t,new V.c({link:new X.a({uri:"https://hasura.io/learn/graphql",headers:{Authorization:"Bearer ".concat(l)}}),cache:new K.a}));return o.a.createElement(Y.a,{client:c},o.a.createElement("div",null,o.a.createElement(w,{logoutHandler:r}),o.a.createElement("div",{className:"row container-fluid p-left-right-0 m-left-right-0"},o.a.createElement("div",{className:"row col-md-9 p-left-right-0 m-left-right-0"},o.a.createElement("div",{className:"col-md-6 sliderMenu p-30"},o.a.createElement($,null)),o.a.createElement("div",{className:"col-md-6 sliderMenu p-30 bg-gray border-right"},o.a.createElement(z,null))),o.a.createElement("div",{className:"col-md-3 p-left-right-0"},o.a.createElement("div",{className:"col-md-12 sliderMenu p-30 bg-gray"},o.a.createElement(D,null))))))},ee=function(){return window.history.replaceState({},document.title,window.location.pathname)},te=o.a.createContext(),ne=function(){return Object(l.useContext)(te)},ae=function(e){var t=e.children,n=e.onRedirectCallback,a=void 0===n?ee:n,r=Object(m.a)(e,["children","onRedirectCallback"]),c=Object(l.useState)(!1),i=Object(d.a)(c,2),p=i[0],v=i[1],g=Object(l.useState)(),b=Object(d.a)(g,2),y=b[0],k=b[1],w=Object(l.useState)(),j=Object(d.a)(w,2),O=j[0],N=j[1],C=Object(l.useState)(!0),_=Object(d.a)(C,2),T=_[0],x=_[1],P=Object(l.useState)(!1),q=Object(d.a)(P,2),S=q[0],W=q[1],I=Object(l.useState)(""),R=Object(d.a)(I,2),L=R[0],B=R[1];Object(l.useEffect)(function(){(function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,l,o,c,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()(r);case 2:if(t=e.sent,N(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,l=n.appState,a(l);case 10:return e.next=12,t.isAuthenticated();case 12:if(o=e.sent,v(o),!o){e.next=23;break}return e.next=17,t.getUser();case 17:return c=e.sent,k(c),e.next=21,t.getIdTokenClaims();case 21:i=e.sent,B(i.__raw);case 23:x(!1);case 24:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[]);var F=function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,a=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},W(!0),e.prev=2,e.next=5,O.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,W(!1),e.finish(10);case 13:return e.next=15,O.getUser();case 15:n=e.sent,k(n),v(!0);case 18:case"end":return e.stop()}},e,null,[[2,7,10,13]])}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,O.handleRedirectCallback();case 3:return t=e.sent,e.next=6,O.getUser();case 6:return n=e.sent,e.next=9,O.getIdTokenClaims();case 9:return a=e.sent,B(a.__raw),x(!1),v(!0),k(n),e.abrupt("return",t);case 15:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return T?o.a.createElement(E,null):p?o.a.createElement(te.Provider,{value:{isAuthenticated:p,user:y,loading:T,popupOpen:S,loginWithPopup:F,handleRedirectCallback:U,getIdTokenClaims:function(){return O.getIdTokenClaims.apply(O,arguments)},loginWithRedirect:function(){return O.loginWithRedirect.apply(O,arguments)},getTokenSilently:function(){return O.getTokenSilently.apply(O,arguments)},getTokenWithPopup:function(){return O.getTokenWithPopup.apply(O,arguments)},logout:function(){return O.logout.apply(O,arguments)}}},t,o.a.createElement(Z,{idToken:L})):o.a.createElement(te.Provider,{value:{isAuthenticated:p,user:y,loading:T,popupOpen:S,loginWithPopup:F,handleRedirectCallback:U,getIdTokenClaims:function(){return O.getIdTokenClaims.apply(O,arguments)},loginWithRedirect:function(){return O.loginWithRedirect.apply(O,arguments)},getTokenSilently:function(){return O.getTokenSilently.apply(O,arguments)},getTokenWithPopup:function(){return O.getTokenWithPopup.apply(O,arguments)},logout:function(){return O.logout.apply(O,arguments)}}},o.a.createElement(h,null))},re=n(17),le=Object(re.a)(),oe="graphql-tutorials.auth0.com",ce="P38qnFo1lFAQJrzkun--wEzqljVNGcWW",ie="http://localhost:3000/callback",ue=function(e){le.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)},se=o.a.createElement(c.b,{history:le},o.a.createElement(c.a,{path:"/",render:function(){return o.a.createElement(ae,{domain:oe,client_id:ce,redirect_uri:ie,onRedirectCallback:ue})}}));r.a.render(se,document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.4f442674.chunk.js.map