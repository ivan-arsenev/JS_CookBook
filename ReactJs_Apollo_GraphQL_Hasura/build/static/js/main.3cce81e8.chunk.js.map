{"version":3,"sources":["components/Auth/loading.svg","components/Auth/Callback.js","components/Auth/Login.js","components/Auth/LogoutBtn.js","components/Header.js","components/Todo/TodoItem.js","components/Todo/TodoFilters.js","components/Todo/TodoPrivateList.js","components/Todo/TodoInput.js","components/Todo/TodoPrivateWrapper.js","components/Todo/TaskItem.js","components/Todo/TodoPublicList.js","components/Todo/TodoPublicWrapper.js","components/OnlineUsers/OnlineUser.js","components/OnlineUsers/OnlineUsersWrapper.js","components/App.js","components/Auth/react-auth0-spa.js","utils/history.js","components/Auth/auth0-variables.js","index.js"],"names":["module","exports","__webpack_require__","p","Callback","react_default","a","createElement","style","position","display","justifyContent","height","width","top","bottom","left","right","backgroundColor","src","loading","alt","Login","_useAuth","useAuth0","loginWithRedirect","className","Button","id","variant","onClick","LogoutBtn","_ref","logoutHandler","Header","Navbar","Brand","Collapse","Auth_LogoutBtn","TodoItem","index","todo","REMOVE_TODO","gql","_templateObject","_useMutation","useMutation","removeTodoMutation","Object","slicedToArray","TOGGLE_TODO","_templateObject2","_useMutation3","toggleTodoMutation","checked","is_completed","type","onChange","variables","isCompleted","optimisticResponse","update","cache","newTodos","readQuery","query","GET_MY_TODOS","todos","map","t","objectSpread","writeQuery","data","htmlFor","title","e","preventDefault","stopPropagation","filter","TodoFilters","currentFilter","filterResultsFn","clearCompletedFn","filterResultsHandler","clearCompletedButton","activeTodos","itemCount","length","TodoPrivateList_templateObject","CLEAR_COMPLETED","TodoPrivateList_templateObject2","TodoPrivateList","props","_useState","useState","clearInProgress","_useState2","state","setState","clearCompletedTodos","filteredTodos","todoList","forEach","push","Todo_TodoItem","key","react","Todo_TodoFilters","TodoPrivateListQuery","_useQuery","useQuery","error","console","TodoPrivateList_TodoPrivateList","ADD_TODO","TodoInput_templateObject","TodoInput","_ref$isPublic","isPublic","todoInput","setTodoInput","_ref2","existingTodos","newTodo","insert_todos","returning","concat","toConsumableArray","onCompleted","addTodo","onSubmit","placeholder","value","target","ref","n","required","TodoPrivateWrapper","Todo_TodoInput","Todo_TodoPrivateList","TaskItem","user","name","TodoPublicList","olderTodosAvailable","latestTodo","newTodosCount","numTodos","oldestTodoId","newestTodoId","client","useApolloClient","useEffect","loadOlder","prevState","asyncToGenerator","regenerator_default","mark","_callee","GET_OLD_PUBLIC_TODOS","wrap","_context","prev","next","TodoPublicList_templateObject","sent","stop","apply","this","arguments","loadNew","_ref3","_callee2","GET_NEW_PUBLIC_TODOS","_ref4","_context2","TodoPublicList_templateObject2","latestVisibleId","toString","Todo_TaskItem","NOTIFY_NEW_PUBLIC_TODOS","_templateObject3","TodoPublicListSubscription","_useSubscription","useSubscription","TodoPublicList_TodoPublicList","TodoPublicWrapper","Todo_TodoPublicList","OnlineUser","OnlineUsersWrapper","onlineUsersList","onlineIndicator","setOnlineIndicator","updateLastSeen","setInterval","clearInterval","UPDATE_LASTSEEN_MUTATION","OnlineUsersWrapper_templateObject","updateLastSeenMutation","now","Date","toISOString","OnlineUsersWrapper_templateObject2","online_users","u","OnlineUsers_OnlineUser","App","idToken","logout","authToken","ApolloClient","link","WebSocketLink","uri","options","reconnect","connectionParams","headers","Authorization","InMemoryCache","react_common_esm","components_Header","Todo_TodoPrivateWrapper","Todo_TodoPublicWrapper","OnlineUsers_OnlineUsersWrapper","DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","location","pathname","Auth0Context","React","createContext","useContext","Auth0Provider","children","_ref$onRedirectCallba","onRedirectCallback","initOptions","objectWithoutProperties","isAuthenticated","setIsAuthenticated","_useState3","_useState4","setUser","_useState5","_useState6","auth0Client","setAuth0","_useState7","_useState8","setLoading","_useState9","_useState10","popupOpen","setPopupOpen","_useState11","_useState12","setIdToken","auth0FromHook","appState","_user","idTokenClaims","createAuth0Client","search","includes","handleRedirectCallback","getUser","getIdTokenClaims","__raw","initAuth0","loginWithPopup","params","_args2","undefined","t0","finish","_ref5","_callee3","result","_context3","abrupt","Auth_Callback","Provider","getTokenSilently","getTokenWithPopup","components_App","Auth_Login","createBrowserHistory","AUTH_CONFIG","targetUrl","mainRoutes","react_router","path","render","react_auth0_spa_Auth0Provider","domain","client_id","redirect_uri","ReactDOM","getElementById"],"mappings":"4EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,qQCwBzBC,EArBE,WAcb,OACIC,EAAAC,EAAAC,cAAA,OAAKC,MAdK,CACVC,SAAU,WACVC,QAAS,OACTC,eAAgB,SAChBC,OAAQ,QACRC,MAAO,QACPC,IAAK,EACLC,OAAQ,EACRC,KAAM,EACNC,MAAO,EACPC,gBAAiB,UAKbb,EAAAC,EAAAC,cAAA,OAAKY,IAAKC,IAASC,IAAI,uBCepBC,EA7BD,WAAM,IAAAC,EACuBC,KAA/BJ,EADQG,EACRH,QAASK,EADDF,EACCE,kBACjB,OAAIL,EACOf,EAAAC,EAAAC,cAAA,yBAGPF,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,WACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,mBACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,mBAAf,uCAGArB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,mBAAf,4BACArB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,kBACXrB,EAAAC,EAAAC,cAACoB,EAAA,EAAD,CACIC,GAAG,aACHC,QAAQ,UACRH,UAAU,sBACVI,QAAS,WACLL,EAAkB,MAL1B,sBCJLM,EAXG,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,cAAH,OACd5B,EAAAC,EAAAC,cAACoB,EAAA,EAAD,CACIC,GAAG,cACHC,QAAQ,UACRH,UAAU,uBACVI,QAASG,GAJb,YCSWC,EATA,SAAAF,GAAA,IAAGC,EAAHD,EAAGC,cAAH,OACX5B,EAAAC,EAAAC,cAAC4B,EAAA,EAAD,CAAQT,UAAU,2BACdrB,EAAAC,EAAAC,cAAC4B,EAAA,EAAOC,MAAR,6BACA/B,EAAAC,EAAAC,cAAC4B,EAAA,EAAOE,SAAR,CAAiBX,UAAU,uBACvBrB,EAAAC,EAAAC,cAAC+B,EAAD,CAAWL,cAAeA,onBCJtC,IA4FeM,EA5FE,SAAAP,GAAqBA,EAAlBQ,MAAkB,IAAXC,EAAWT,EAAXS,KAoBjBC,EAAcC,IAAHC,KApBiBC,EA2BLC,YAAYJ,GAAlCK,EA3B2BC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,MA6B5BK,EAAcP,IAAHQ,KA7BiBC,EAuCLN,YAAYI,GAAlCG,EAvC2BL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,MA+DlC,OACI/C,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,QACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,SACXrB,EAAAC,EAAAC,cAAA,SACI+C,QAASb,EAAKc,aACdC,KAAK,WACL5B,GAAIa,EAAKb,GACT6B,SA7BD,WACfJ,EAAmB,CACfK,UAAW,CAAE9B,GAAIa,EAAKb,GAAI+B,aAAclB,EAAKc,cAC7CK,mBAAoB,KACpBC,OAAQ,SAAAC,GACJ,IACMC,EADgBD,EAAME,UAAU,CAAEC,MAAOC,IAChBC,MAAMC,IAAI,SAAAC,GACrC,OAAIA,EAAEzC,KAAOa,EAAKb,GACPoB,OAAAsB,EAAA,EAAAtB,CAAA,GAAKqB,EAAZ,CAAed,cAAec,EAAEd,eAEzBc,IAGfP,EAAMS,WAAW,CACbN,MAAOC,EACPM,KAAM,CAAEL,MAAOJ,WAgBf1D,EAAAC,EAAAC,cAAA,SAAOkE,QAAShC,EAAKb,OAI7BvB,EAAAC,EAAAC,cAAA,OACImB,UACI,gBAAkBe,EAAKc,aAAe,aAAe,KAGzDlD,EAAAC,EAAAC,cAAA,WAAMkC,EAAKiC,QAGfrE,EAAAC,EAAAC,cAAA,UAAQmB,UAAU,WAAWI,QApFlB,SAAA6C,GACfA,EAAEC,iBACFD,EAAEE,kBACF9B,EAAmB,CACfW,UAAW,CAAE9B,GAAIa,EAAKb,IACtBgC,mBAAoB,KACpBC,OAAQ,SAAAC,GACJ,IACMC,EADgBD,EAAME,UAAU,CAAEC,MAAOC,IAChBC,MAAMW,OACjC,SAAAT,GAAC,OAAIA,EAAEzC,KAAOa,EAAKb,KAEvBkC,EAAMS,WAAW,CACbN,MAAOC,EACPM,KAAM,CAAEL,MAAOJ,UAuEvB,OCrBGgB,EAjEK,SAAA/C,GAKd,IAJFmC,EAIEnC,EAJFmC,MACAa,EAGEhD,EAHFgD,cACAC,EAEEjD,EAFFiD,gBACAC,EACElD,EADFkD,iBAEMC,EAAuB,SAAAL,GACzB,OAAO,WACHG,EAAgBH,KAKlBM,EACF/E,EAAAC,EAAAC,cAAA,UAAQuB,QAASoD,EAAkBxD,UAAU,aAA7C,mBAKE2D,EAAclB,EAAMW,OAAO,SAAArC,GAAI,OAA0B,IAAtBA,EAAKc,eAE1C+B,EAAYnB,EAAMoB,OAOtB,MANsB,WAAlBP,EACAM,EAAYD,EAAYE,OACC,cAAlBP,IACPM,EAAYnB,EAAMoB,OAASF,EAAYE,QAIvClF,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,cACXrB,EAAAC,EAAAC,cAAA,YACK,IACA+E,EAFL,QAGmB,IAAdA,EAAkB,IAAM,IAG7BjF,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,MAAIuB,QAASqD,EAAqB,QAC9B9E,EAAAC,EAAAC,cAAA,KAAGmB,UAA6B,QAAlBsD,EAA0B,WAAa,IAArD,QAKJ3E,EAAAC,EAAAC,cAAA,MAAIuB,QAASqD,EAAqB,WAC9B9E,EAAAC,EAAAC,cAAA,KAAGmB,UAA6B,WAAlBsD,EAA6B,WAAa,IAAxD,WAKJ3E,EAAAC,EAAAC,cAAA,MAAIuB,QAASqD,EAAqB,cAC9B9E,EAAAC,EAAAC,cAAA,KACImB,UACsB,cAAlBsD,EAAgC,WAAa,IAFrD,eAUPI,2kBCxDb,IAAMlB,EAAevB,IAAH6C,KAcZC,EAAkB9C,IAAH+C,KAUfC,EAAkB,SAAAC,GAAS,IAAAC,EACHC,mBAAS,CAC/BhB,OAAQ,MACRiB,iBAAiB,IAHQC,EAAAhD,OAAAC,EAAA,EAAAD,CAAA6C,EAAA,GACtBI,EADsBD,EAAA,GACfE,EADeF,EAAA,GAAAnD,EAaCC,YAAY2C,GAAnCU,EAbsBnD,OAAAC,EAAA,EAAAD,CAAAH,EAAA,MA+BrBsB,EAAUyB,EAAVzB,MACJiC,EAAgBjC,EAEC,WAAjB8B,EAAMnB,OACNsB,EAAgBjC,EAAMW,OAAO,SAAArC,GAAI,OAA0B,IAAtBA,EAAKc,eAClB,cAAjB0C,EAAMnB,SACbsB,EAAgBjC,EAAMW,OAAO,SAAArC,GAAI,OAA0B,IAAtBA,EAAKc,gBAG9C,IAAM8C,EAAW,GAMjB,OAJAD,EAAcE,QAAQ,SAAC7D,EAAMD,GACzB6D,EAASE,KAAKlG,EAAAC,EAAAC,cAACiG,EAAD,CAAUC,IAAKjE,EAAOA,MAAOA,EAAOC,KAAMA,OAIxDpC,EAAAC,EAAAC,cAACmG,EAAA,SAAD,KACIrG,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,mBACXrB,EAAAC,EAAAC,cAAA,UAAK8F,IAGThG,EAAAC,EAAAC,cAACoG,EAAD,CACIxC,MAAOiC,EACPpB,cAAeiB,EAAMnB,OACrBG,gBAjDU,SAAAH,GAClBoB,EAASlD,OAAAsB,EAAA,EAAAtB,CAAA,GACFiD,EADC,CAEJnB,OAAQA,MA+CJI,iBA1CW,WACnBiB,EAAoB,CAChBvC,mBAAoB,KACpBC,OAAQ,SAACC,EAAD9B,GAAqBA,EAAXwC,KAAW,IAEnBT,EADgBD,EAAME,UAAU,CAAEC,MAAOC,IAChBC,MAAMW,OACjC,SAAAT,GAAC,OAAKA,EAAEd,eAEZO,EAAMS,WAAW,CACbN,MAAOC,EACPM,KAAM,CAAEL,MAAOJ,SAiCnBgC,gBAAiBE,EAAMF,oBAmBxBa,EAbc,WAAM,IAAAC,EACEC,YAAS5C,GAAlC9C,EADuByF,EACvBzF,QAAS2F,EADcF,EACdE,MAAOvC,EADOqC,EACPrC,KAExB,OAAIpD,EACOf,EAAAC,EAAAC,cAAA,yBAEPwG,GACAC,QAAQD,MAAMA,GACP1G,EAAAC,EAAAC,cAAA,sBAEJF,EAAAC,EAAAC,cAAC0G,EAAD,CAAiB9C,MAAOK,EAAKL,wYC/FxC,IAAM+C,EAAWvE,IAAHwE,KA4DCC,EA/CG,SAAApF,GAA0B,IAAAqF,EAAArF,EAAvBsF,gBAAuB,IAAAD,KAAAxB,EAENC,mBAAS,IAFHE,EAAAhD,OAAAC,EAAA,EAAAD,CAAA6C,EAAA,GAEjC0B,EAFiCvB,EAAA,GAEtBwB,EAFsBxB,EAAA,GAAAnD,EAsBtBC,YAAYoE,EAAU,CACpCrD,OApBgB,SAACC,EAAD2D,GAAqB,IAAXjD,EAAWiD,EAAXjD,KAE1B,GAAI8C,EACA,OAAO,KAGX,IAAMI,EAAgB5D,EAAME,UAAU,CAClCC,MAAOC,IAGLyD,EAAUnD,EAAKoD,aAAaC,UAAU,GAC5C/D,EAAMS,WAAW,CACbN,MAAOC,EACPM,KAAM,CAAEL,MAAK,CAAGwD,GAAHG,OAAA9E,OAAA+E,EAAA,EAAA/E,CAAe0E,EAAcvD,YAQ9C6D,YALe,WACfR,EAAa,OAEVS,EAtBiCjF,OAAAC,EAAA,EAAAD,CAAAH,EAAA,MA0BxC,OACIxC,EAAAC,EAAAC,cAAA,QACImB,UAAU,YACVwG,SAAU,SAAAvD,GACNA,EAAEC,iBACFqD,EAAQ,CAAEvE,UAAW,CAAEjB,KAAM8E,EAAWD,gBAG5CjH,EAAAC,EAAAC,cAAA,SACImB,UAAU,QACVyG,YAAY,yBACZC,MAAOb,EACP9D,SAAU,SAAAkB,GAAC,OAAI6C,EAAa7C,EAAE0D,OAAOD,QACrCE,IAAK,SAAAC,GAAC,OAAaA,GACnBC,UAAQ,IAEZnI,EAAAC,EAAAC,cAAA,KAAGmB,UAAU,oCChDV+G,EAXY,WACvB,OACIpI,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,eACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,iBAAf,kBAEArB,EAAAC,EAAAC,cAACmI,EAAD,MACArI,EAAAC,EAAAC,cAACoI,EAAD,QCSGC,EAlBE,SAAA5G,GAAqBA,EAAlBQ,MAAkB,IAAXC,EAAWT,EAAXS,KACvB,OACIpC,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,iBAAiBgD,MAAOjC,EAAKoG,KAAKC,MAAjD,IACMrG,EAAKoG,KAAKC,MAGhBzI,EAAAC,EAAAC,cAAA,OACImB,UACI,gBAAkBe,EAAKc,aAAe,aAAe,KAGzDlD,EAAAC,EAAAC,cAAA,WAAMkC,EAAKiC,igDCT3B,IAAMqE,EAAiB,SAAAnD,GAAS,IAAAC,EACFC,mBAAS,CAC/BkD,sBAAqBpD,EAAMqD,WAC3BC,cAAe,EACfnC,OAAO,EACP5C,MAAO,KALiB6B,EAAAhD,OAAAC,EAAA,EAAAD,CAAA6C,EAAA,GACrBI,EADqBD,EAAA,GACdE,EADcF,EAAA,GAQxBmD,EAAWlD,EAAM9B,MAAMoB,OACvB6D,EAAeD,EACblD,EAAM9B,MAAMgF,EAAW,GAAGvH,GAC1BgE,EAAMqD,WACFrD,EAAMqD,WAAWrH,GAAK,EACtB,EACNyH,EAAeF,EACblD,EAAM9B,MAAM,GAAGvC,GACfgE,EAAMqD,WACFrD,EAAMqD,WAAWrH,GACjB,EAEJ0H,EAASC,cAEfC,oBAAU,WACNC,KACD,IAEHD,oBACI,WACQ5D,EAAMqD,YAAcrD,EAAMqD,WAAWrH,GAAKyH,IAC1CnD,EAAS,SAAAwD,GACL,OAAO1G,OAAAsB,EAAA,EAAAtB,CAAA,GACA0G,EADP,CAEIR,cAAeQ,EAAUR,cAAgB,MAGjDG,EAAezD,EAAMqD,WAAWrH,KAGxC,CAACgE,EAAMqD,aAGX,IAAMQ,EAAS,eAAAzH,EAAAgB,OAAA2G,EAAA,EAAA3G,CAAA4G,EAAAtJ,EAAAuJ,KAAG,SAAAC,IAAA,IAAAC,EAAAtC,EAAAV,EAAAvC,EAAA,OAAAoF,EAAAtJ,EAAA0J,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACRJ,EAAuBpH,IADfyH,KAAAH,EAAAE,KAAA,EAqBgBb,EAAOrF,MAAM,CACvCA,MAAO8F,EACPrG,UAAW,CAAE0F,aAAcA,KAvBjB,OAAA3B,EAAAwC,EAAAI,KAqBNtD,EArBMU,EAqBNV,OAAOvC,EArBDiD,EAqBCjD,MAKNL,MAAMoB,QACXW,EAAS,SAAAwD,GACL,OAAO1G,OAAAsB,EAAA,EAAAtB,CAAA,GACA0G,EADP,CAEIvF,MAAK,GAAA2D,OAAA9E,OAAA+E,EAAA,EAAA/E,CAAM0G,EAAUvF,OAAhBnB,OAAA+E,EAAA,EAAA/E,CAA0BwB,EAAKL,YAG5CiF,EAAe5E,EAAKL,MAAMK,EAAKL,MAAMoB,OAAS,GAAG3D,IAEjDsE,EAAS,SAAAwD,GACL,OAAO1G,OAAAsB,EAAA,EAAAtB,CAAA,GAAK0G,EAAZ,CAAuBV,qBAAqB,MAGhDjC,IACAC,QAAQD,MAAMA,GACdb,EAAS,SAAAwD,GACL,OAAO1G,OAAAsB,EAAA,EAAAtB,CAAA,GAAK0G,EAAZ,CAAuB3C,OAAO,OA1CxB,wBAAAkD,EAAAK,SAAAR,MAAH,yBAAA9H,EAAAuI,MAAAC,KAAAC,YAAA,GA+CTC,EAAO,eAAAC,EAAA3H,OAAA2G,EAAA,EAAA3G,CAAA4G,EAAAtJ,EAAAuJ,KAAG,SAAAe,IAAA,IAAAC,EAAAC,EAAA/D,EAAAvC,EAAA,OAAAoF,EAAAtJ,EAAA0J,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cACNU,EAAuBlI,IADjBqI,KAAAD,EAAAZ,KAAA,EAoBkBb,EAAOrF,MAAM,CACvCA,MAAO4G,EACPnH,UAAW,CACPuH,gBAAiBhF,EAAM9B,MAAMoB,OAASU,EAAM9B,MAAM,GAAGvC,GAAK,QAvBtD,OAAAkJ,EAAAC,EAAAV,KAoBJtD,EApBI+D,EAoBJ/D,OAAOvC,EApBHsG,EAoBGtG,QAQX0B,EAAS,SAAAwD,GACL,OAAO1G,OAAAsB,EAAA,EAAAtB,CAAA,GACA0G,EADP,CAEIvF,MAAK,GAAA2D,OAAA9E,OAAA+E,EAAA,EAAA/E,CAAMwB,EAAKL,OAAXnB,OAAA+E,EAAA,EAAA/E,CAAqB0G,EAAUvF,QACpC+E,cAAe,MAGvBG,EAAe7E,EAAKL,MAAM,GAAGvC,IAE7BmF,IACAC,QAAQD,MAAMA,GACdb,EAAS,SAAAwD,GACL,OAAO1G,OAAAsB,EAAA,EAAAtB,CAAA,GAAK0G,EAAZ,CAAuB3C,OAAO,OAxC1B,wBAAAgE,EAAAT,SAAAM,MAAH,yBAAAD,EAAAJ,MAAAC,KAAAC,YAAA,GA6Cb,OACIpK,EAAAC,EAAAC,cAACmG,EAAA,SAAD,KACIrG,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,mBACc,IAAxBuE,EAAMiD,eACH7I,EAAAC,EAAAC,cAAA,OAAKmB,UAAW,kBAAmBI,QAAS4I,GAA5C,4BAEKzE,EAAMiD,cAAcgC,WAFzB,KAMJ7K,EAAAC,EAAAC,cAAA,UACK0F,EAAM9B,OACH8B,EAAM9B,MAAMC,IAAI,SAAC3B,EAAMD,GACnB,OACInC,EAAAC,EAAAC,cAAC4K,EAAD,CACI1E,IAAKjE,EACLA,MAAOA,EACPC,KAAMA,OAM1BpC,EAAAC,EAAAC,cAAA,OAAKmB,UAAW,kBAAmBI,QAAS2H,GACvCxD,EAAM+C,oBACD,mBACA,4BAQpBoC,EAA0BzI,IAAH0I,KAyBdC,EAZoB,WAAM,IAAAC,EACJC,YAAgBJ,GAAzChK,EAD6BmK,EAC7BnK,QAAS2F,EADoBwE,EACpBxE,MAAOvC,EADa+G,EACb/G,KACxB,OAAIpD,EACOf,EAAAC,EAAAC,cAAA,0BAEPwG,EACO1G,EAAAC,EAAAC,cAAA,qBAGPF,EAAAC,EAAAC,cAACkL,EAAD,CAAgBxC,WAAYzE,EAAKL,MAAMoB,OAASf,EAAKL,MAAM,GAAK,QClLzDuH,EAXW,WACtB,OACIrL,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,eACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,iBAAf,0BAEArB,EAAAC,EAAAC,cAACmI,EAAD,CAAWpB,UAAQ,IACnBjH,EAAAC,EAAAC,cAACoL,EAAD,QCEGC,EAXI,SAAA5J,GAAc,IAAX6G,EAAW7G,EAAX6G,KAClB,OACIxI,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,YACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,WACXrB,EAAAC,EAAAC,cAAA,KAAGmB,UAAU,iBAEjBrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,YAAYmH,EAAKC,6kBCF5C,IAiEe+C,GAjEY,WAAM,IAEzBC,EAFyBjG,EACiBC,mBAAS,GAD1BE,EAAAhD,OAAAC,EAAA,EAAAD,CAAA6C,EAAA,GACtBkG,EADsB/F,EAAA,GACLgG,EADKhG,EAAA,GAG7BwD,oBAAU,WAIN,OAFAyC,IACAD,EAAmBE,YAAY,kBAAMD,KAAkB,MAChD,WAEHE,cAAcJ,KAEnB,IACH,IAAMK,EAA2BzJ,IAAH0J,KAZDxJ,EAmBIC,YAAYsJ,GAAtCE,EAnBsBtJ,OAAAC,EAAA,EAAAD,CAAAH,EAAA,MAoBvBoJ,EAAiB,WAEnBK,EAAuB,CACnB5I,UAAW,CAAE6I,KAAK,IAAIC,MAAOC,kBAvBRlB,EA2BIC,YAC7B7I,IAD6C+J,MAAzCtL,EA3BqBmK,EA2BrBnK,QAAS2F,EA3BYwE,EA2BZxE,MAAOvC,EA3BK+G,EA2BL/G,KAaxB,OAAIpD,EACOf,EAAAC,EAAAC,cAAA,0BAEPwG,GACAC,QAAQD,MAAMA,GACP1G,EAAAC,EAAAC,cAAA,wBAEPiE,IACAsH,EAAkBtH,EAAKmI,aAAavI,IAAI,SAAAwI,GAAC,OACrCvM,EAAAC,EAAAC,cAACsM,EAAD,CAAYpG,IAAKmG,EAAEhL,GAAIiH,KAAM+D,EAAE/D,UAKnCxI,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,sBACXrB,EAAAC,EAAAC,cAACmG,EAAA,SAAD,KACIrG,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,gBAAf,kBACoBoK,EAAgBvG,QAEnCuG,yCCTFgB,GA5BH,SAAA9K,GAAiB,IAAd+K,EAAc/K,EAAd+K,QAAcxL,EACGC,KAApBJ,EADiBG,EACjBH,QAAS4L,EADQzL,EACRyL,OACjB,GAAI5L,EACA,OAAOf,EAAAC,EAAAC,cAAA,yBAEX,IArBuB0M,EAqBjB3D,GArBiB2D,EAqBWF,EApB3B,IAAIG,KAAa,CACpBC,KAAM,IAAIC,KAAc,CACpBC,IAAK,gCACLC,QAAS,CACLC,WAAW,EACXC,iBAAkB,CACdC,QAAS,CACLC,cAAa,UAAA5F,OAAYmF,QAKzCnJ,MAAO,IAAI6J,QASf,OACItN,EAAAC,EAAAC,cAACqN,GAAA,EAAD,CAAgBtE,OAAQA,GACpBjJ,EAAAC,EAAAC,cAACsN,EAAD,CAAQ5L,cAAe+K,IACvB3M,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,qDACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,8CACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,4BACXrB,EAAAC,EAAAC,cAACuN,EAAD,OAEJzN,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,iDACXrB,EAAAC,EAAAC,cAACwN,EAAD,QAGR1N,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,2BACXrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,qCACXrB,EAAAC,EAAAC,cAACyN,GAAD,WC1ClBC,GAA4B,kBAC9BC,OAAOC,QAAQC,aAAa,GAAIC,SAAS3J,MAAOwJ,OAAOI,SAASC,WAEvDC,GAAeC,IAAMC,gBACrBlN,GAAW,kBAAMmN,qBAAWH,KAC5BI,GAAgB,SAAA5M,GAIvB,IAHF6M,EAGE7M,EAHF6M,SAGEC,EAAA9M,EAFF+M,0BAEE,IAAAD,EAFmBb,GAEnBa,EADCE,EACDhM,OAAAiM,EAAA,EAAAjM,CAAAhB,EAAA,mCAAA6D,EAC4CC,oBAAS,GADrDE,EAAAhD,OAAAC,EAAA,EAAAD,CAAA6C,EAAA,GACKqJ,EADLlJ,EAAA,GACsBmJ,EADtBnJ,EAAA,GAAAoJ,EAEsBtJ,qBAFtBuJ,EAAArM,OAAAC,EAAA,EAAAD,CAAAoM,EAAA,GAEKvG,EAFLwG,EAAA,GAEWC,EAFXD,EAAA,GAAAE,EAG8BzJ,qBAH9B0J,EAAAxM,OAAAC,EAAA,EAAAD,CAAAuM,EAAA,GAGKE,EAHLD,EAAA,GAGkBE,EAHlBF,EAAA,GAAAG,EAI4B7J,oBAAS,GAJrC8J,EAAA5M,OAAAC,EAAA,EAAAD,CAAA2M,EAAA,GAIKvO,EAJLwO,EAAA,GAIcC,EAJdD,EAAA,GAAAE,EAKgChK,oBAAS,GALzCiK,EAAA/M,OAAAC,EAAA,EAAAD,CAAA8M,EAAA,GAKKE,EALLD,EAAA,GAKgBE,EALhBF,EAAA,GAAAG,EAM4BpK,mBAAS,IANrCqK,EAAAnN,OAAAC,EAAA,EAAAD,CAAAkN,EAAA,GAMKnD,EANLoD,EAAA,GAMcC,EANdD,EAAA,GAQF3G,oBAAU,YACS,eAAA/B,EAAAzE,OAAA2G,EAAA,EAAA3G,CAAA4G,EAAAtJ,EAAAuJ,KAAG,SAAAC,IAAA,IAAAuG,EAAA1F,EAAA2F,EAAApB,EAAAqB,EAAAC,EAAA,OAAA5G,EAAAtJ,EAAA0J,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACcsG,IAAkBzB,GADhC,UACRqB,EADQpG,EAAAI,KAEdqF,EAASW,IAELnC,OAAOI,SAASoC,OAAOC,SAAS,SAJtB,CAAA1G,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,EAOAkG,EAAcO,yBAPd,OAAAjG,EAAAV,EAAAI,KAMNiG,EANM3F,EAMN2F,SAEJvB,EAAmBuB,GART,eAAArG,EAAAE,KAAA,GAWgBkG,EAAcnB,kBAX9B,WAWRA,EAXQjF,EAAAI,KAad8E,EAAmBD,IAEfA,EAfU,CAAAjF,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAgBSkG,EAAcQ,UAhBvB,eAgBJhI,EAhBIoB,EAAAI,KAiBViF,EAAQzG,GAjBEoB,EAAAE,KAAA,GAkBkBkG,EAAcS,mBAlBhC,QAkBJN,EAlBIvG,EAAAI,KAmBV+F,EAAWI,EAAcO,OAnBf,QAsBdlB,GAAW,GAtBG,yBAAA5F,EAAAK,SAAAR,MAAH,yBAAArC,EAAA8C,MAAAC,KAAAC,aAAA,EAwBfuG,IAED,IAEH,IAAMC,EAAc,eAAAnG,EAAA9H,OAAA2G,EAAA,EAAA3G,CAAA4G,EAAAtJ,EAAAuJ,KAAG,SAAAe,IAAA,IAAAsG,EAAArI,EAAAsI,EAAA1G,UAAA,OAAAb,EAAAtJ,EAAA0J,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAO+G,EAAPC,EAAA5L,OAAA,QAAA6L,IAAAD,EAAA,GAAAA,EAAA,GAAgB,GACnClB,GAAa,GADMlF,EAAAb,KAAA,EAAAa,EAAAZ,KAAA,EAGTsF,EAAYwB,eAAeC,GAHlB,OAAAnG,EAAAZ,KAAA,gBAAAY,EAAAb,KAAA,EAAAa,EAAAsG,GAAAtG,EAAA,SAKf/D,QAAQD,MAARgE,EAAAsG,IALe,eAAAtG,EAAAb,KAAA,GAOf+F,GAAa,GAPElF,EAAAuG,OAAA,mBAAAvG,EAAAZ,KAAA,GASAsF,EAAYoB,UATZ,QASbhI,EATakC,EAAAV,KAUnBiF,EAAQzG,GACRsG,GAAmB,GAXA,yBAAApE,EAAAT,SAAAM,EAAA,uBAAH,yBAAAE,EAAAP,MAAAC,KAAAC,YAAA,GAcdmG,EAAsB,eAAAW,EAAAvO,OAAA2G,EAAA,EAAA3G,CAAA4G,EAAAtJ,EAAAuJ,KAAG,SAAA2H,IAAA,IAAAC,EAAA5I,EAAA2H,EAAA,OAAA5G,EAAAtJ,EAAA0J,KAAA,SAAA0H,GAAA,cAAAA,EAAAxH,KAAAwH,EAAAvH,MAAA,cAC3B0F,GAAW,GADgB6B,EAAAvH,KAAA,EAENsF,EAAYmB,yBAFN,cAErBa,EAFqBC,EAAArH,KAAAqH,EAAAvH,KAAA,EAGRsF,EAAYoB,UAHJ,cAGrBhI,EAHqB6I,EAAArH,KAAAqH,EAAAvH,KAAA,EAICsF,EAAYqB,mBAJb,cAIrBN,EAJqBkB,EAAArH,KAK3B+F,EAAWI,EAAcO,OAEzBlB,GAAW,GACXV,GAAmB,GACnBG,EAAQzG,GATmB6I,EAAAC,OAAA,SAUpBF,GAVoB,yBAAAC,EAAApH,SAAAkH,MAAH,yBAAAD,EAAAhH,MAAAC,KAAAC,YAAA,GAa5B,OAAIrJ,EACOf,EAAAC,EAAAC,cAACqR,EAAD,MAEN1C,EA2BD7O,EAAAC,EAAAC,cAACiO,GAAaqD,SAAd,CACIzJ,MAAO,CACH8G,kBACArG,OACAzH,UACA4O,YACAiB,iBACAL,yBACAE,iBAAkB,kBAAUrB,EAAYqB,iBAAZvG,MAAAkF,EAAWhF,YACvChJ,kBAAmB,kBACfgO,EAAYhO,kBAAZ8I,MAAAkF,EAAWhF,YACfqH,iBAAkB,kBAAUrC,EAAYqC,iBAAZvH,MAAAkF,EAAWhF,YACvCsH,kBAAmB,kBACftC,EAAYsC,kBAAZxH,MAAAkF,EAAWhF,YACfuC,OAAQ,kBAAUyC,EAAYzC,OAAZzC,MAAAkF,EAAWhF,cAGhCoE,EACDxO,EAAAC,EAAAC,cAACyR,GAAD,CAAKjF,QAASA,KA3Cd1M,EAAAC,EAAAC,cAACiO,GAAaqD,SAAd,CACIzJ,MAAO,CACH8G,kBACArG,OACAzH,UACA4O,YACAiB,iBACAL,yBACAE,iBAAkB,kBACdrB,EAAYqB,iBAAZvG,MAAAkF,EAAWhF,YACfhJ,kBAAmB,kBACfgO,EAAYhO,kBAAZ8I,MAAAkF,EAAWhF,YACfqH,iBAAkB,kBACdrC,EAAYqC,iBAAZvH,MAAAkF,EAAWhF,YACfsH,kBAAmB,kBACftC,EAAYsC,kBAAZxH,MAAAkF,EAAWhF,YACfuC,OAAQ,kBAAUyC,EAAYzC,OAAZzC,MAAAkF,EAAWhF,cAGjCpK,EAAAC,EAAAC,cAAC0R,EAAD,iBCtGDC,kBCDFC,GACD,8BADCA,GAEC,mCAFDA,GAGI,iCCOXpD,GAAqB,SAAAuB,GACvBnC,GAAQ5H,KACJ+J,GAAYA,EAAS8B,UACf9B,EAAS8B,UACTlE,OAAOI,SAASC,WAIxB8D,GACFhS,EAAAC,EAAAC,cAAC+R,EAAA,EAAD,CAAQnE,QAASA,IACb9N,EAAAC,EAAAC,cAAC+R,EAAA,EAAD,CACIC,KAAK,IACLC,OAAQ,kBACJnS,EAAAC,EAAAC,cAACkS,GAAD,CACIC,OAAQP,GACRQ,UAAWR,GACXS,aAAcT,GACdpD,mBAAoBA,SAOxC8D,IAASL,OAAOH,GAAYhE,SAASyE,eAAe","file":"static/js/main.3cce81e8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.c5590569.svg\";","import React from 'react';\nimport loading from './loading.svg';\n\nconst Callback = () => {\n    const style = {\n        position: 'absolute',\n        display: 'flex',\n        justifyContent: 'center',\n        height: '100vh',\n        width: '100vw',\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'white',\n    };\n\n    return (\n        <div style={style}>\n            <img src={loading} alt=\"loading\" />\n        </div>\n    );\n};\n\nexport default Callback;\n","import React from 'react';\nimport { useAuth0 } from './react-auth0-spa';\n\nimport { Button } from 'react-bootstrap';\n\nconst Login = () => {\n    const { loading, loginWithRedirect } = useAuth0();\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n    return (\n        <div className=\"overlay\">\n            <div className=\"overlay-content\">\n                <div className=\"overlay-heading\">\n                    Welcome to the GraphQL tutorial app\n                </div>\n                <div className=\"overlay-message\">Please login to continue</div>\n                <div className=\"overlay-action\">\n                    <Button\n                        id=\"qsLoginBtn\"\n                        variant=\"primary\"\n                        className=\"btn-margin loginBtn\"\n                        onClick={() => {\n                            loginWithRedirect({});\n                        }}\n                    >\n                        Log In\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Login;\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\n\nconst LogoutBtn = ({ logoutHandler }) => (\n    <Button\n        id=\"qsLogoutBtn\"\n        variant=\"primary\"\n        className=\"btn-margin logoutBtn\"\n        onClick={logoutHandler}\n    >\n        Log Out\n    </Button>\n);\n\nexport default LogoutBtn;\n","import React from 'react';\nimport { Navbar } from 'react-bootstrap';\nimport LogoutBtn from './Auth/LogoutBtn';\n\nconst Header = ({ logoutHandler }) => (\n    <Navbar className=\"justify-content-between\">\n        <Navbar.Brand>GraphQL Tutorial App</Navbar.Brand>\n        <Navbar.Collapse className=\"justify-content-end\">\n            <LogoutBtn logoutHandler={logoutHandler} />\n        </Navbar.Collapse>\n    </Navbar>\n);\n\nexport default Header;\n","import React from 'react';\nimport gql from 'graphql-tag';\nimport { useMutation } from '@apollo/react-hooks';\nimport { GET_MY_TODOS } from './TodoPrivateList';\nconst TodoItem = ({ index, todo }) => {\n    const removeTodo = e => {\n        e.preventDefault();\n        e.stopPropagation();\n        removeTodoMutation({\n            variables: { id: todo.id },\n            optimisticResponse: null,\n            update: cache => {\n                const existingTodos = cache.readQuery({ query: GET_MY_TODOS });\n                const newTodos = existingTodos.todos.filter(\n                    t => t.id !== todo.id\n                );\n                cache.writeQuery({\n                    query: GET_MY_TODOS,\n                    data: { todos: newTodos },\n                });\n            },\n        });\n    };\n\n    const REMOVE_TODO = gql`\n        mutation removeTodo($id: Int!) {\n            delete_todos(where: { id: { _eq: $id } }) {\n                affected_rows\n            }\n        }\n    `;\n    const [removeTodoMutation] = useMutation(REMOVE_TODO);\n\n    const TOGGLE_TODO = gql`\n        mutation toggleTodo($id: Int!, $isCompleted: Boolean!) {\n            update_todos(\n                where: { id: { _eq: $id } }\n                _set: { is_completed: $isCompleted }\n            ) {\n                affected_rows\n            }\n        }\n    `;\n    const [toggleTodoMutation] = useMutation(TOGGLE_TODO); // that comes to TOGGLE_TODO where update_todos takes parameters\n\n    //use of toggleTodoMutation mutate function.\n    const toggleTodo = () => {\n        toggleTodoMutation({\n            variables: { id: todo.id, isCompleted: !todo.is_completed },\n            optimisticResponse: null,\n            update: cache => {\n                const existingTodos = cache.readQuery({ query: GET_MY_TODOS });\n                const newTodos = existingTodos.todos.map(t => {\n                    if (t.id === todo.id) {\n                        return { ...t, is_completed: !t.is_completed };\n                    } else {\n                        return t;\n                    }\n                });\n                cache.writeQuery({\n                    query: GET_MY_TODOS,\n                    data: { todos: newTodos },\n                });\n            },\n        });\n    };\n\n    return (\n        <li>\n            <div className=\"view\">\n                <div className=\"round\">\n                    <input\n                        checked={todo.is_completed}\n                        type=\"checkbox\"\n                        id={todo.id}\n                        onChange={toggleTodo}\n                    />\n                    <label htmlFor={todo.id} />\n                </div>\n            </div>\n\n            <div\n                className={\n                    'labelContent' + (todo.is_completed ? ' completed' : '')\n                }\n            >\n                <div>{todo.title}</div>\n            </div>\n\n            <button className=\"closeBtn\" onClick={removeTodo}>\n                x\n            </button>\n        </li>\n    );\n};\n\nexport default TodoItem;\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from 'react';\n\nconst TodoFilters = ({\n    todos,\n    currentFilter,\n    filterResultsFn,\n    clearCompletedFn,\n}) => {\n    const filterResultsHandler = filter => {\n        return () => {\n            filterResultsFn(filter);\n        };\n    };\n\n    // The clear completed button if these are personal todos\n    const clearCompletedButton = (\n        <button onClick={clearCompletedFn} className=\"clearComp\">\n            Clear completed\n        </button>\n    );\n\n    const activeTodos = todos.filter(todo => todo.is_completed !== true);\n\n    let itemCount = todos.length;\n    if (currentFilter === 'active') {\n        itemCount = activeTodos.length;\n    } else if (currentFilter === 'completed') {\n        itemCount = todos.length - activeTodos.length;\n    }\n\n    return (\n        <div className=\"footerList\">\n            <span>\n                {' '}\n                {itemCount} item\n                {itemCount !== 1 ? 's' : ''}\n            </span>\n\n            <ul>\n                <li onClick={filterResultsHandler('all')}>\n                    <a className={currentFilter === 'all' ? 'selected' : ''}>\n                        All\n                    </a>\n                </li>\n\n                <li onClick={filterResultsHandler('active')}>\n                    <a className={currentFilter === 'active' ? 'selected' : ''}>\n                        Active\n                    </a>\n                </li>\n\n                <li onClick={filterResultsHandler('completed')}>\n                    <a\n                        className={\n                            currentFilter === 'completed' ? 'selected' : ''\n                        }\n                    >\n                        Completed\n                    </a>\n                </li>\n            </ul>\n\n            {clearCompletedButton}\n        </div>\n    );\n};\n\nexport default TodoFilters;\n","import React, { useState, Fragment } from 'react';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\n\nimport TodoItem from './TodoItem';\nimport TodoFilters from './TodoFilters';\nimport gql from 'graphql-tag';\n\nconst GET_MY_TODOS = gql`\n    query getMyTodos {\n        todos(\n            where: { is_public: { _eq: false } }\n            order_by: { created_at: desc }\n        ) {\n            id\n            title\n            created_at\n            is_completed\n        }\n    }\n`;\n// Remove all the todos that are completed\nconst CLEAR_COMPLETED = gql`\n    mutation clearCompleted {\n        delete_todos(\n            where: { is_completed: { _eq: true }, is_public: { _eq: false } }\n        ) {\n            affected_rows\n        }\n    }\n`;\n\nconst TodoPrivateList = props => {\n    const [state, setState] = useState({\n        filter: 'all',\n        clearInProgress: false,\n    });\n\n    const filterResults = filter => {\n        setState({\n            ...state,\n            filter: filter,\n        });\n    };\n\n    const [clearCompletedTodos] = useMutation(CLEAR_COMPLETED);\n    const clearCompleted = () => {\n        clearCompletedTodos({\n            optimisticResponse: null,\n            update: (cache, { data }) => {\n                const existingTodos = cache.readQuery({ query: GET_MY_TODOS });\n                const newTodos = existingTodos.todos.filter(\n                    t => !t.is_completed\n                );\n                cache.writeQuery({\n                    query: GET_MY_TODOS,\n                    data: { todos: newTodos },\n                });\n            },\n        });\n    };\n\n    // changing way of taking data to props\n    const { todos } = props;\n    let filteredTodos = todos;\n\n    if (state.filter === 'active') {\n        filteredTodos = todos.filter(todo => todo.is_completed !== true);\n    } else if (state.filter === 'completed') {\n        filteredTodos = todos.filter(todo => todo.is_completed === true);\n    }\n\n    const todoList = [];\n\n    filteredTodos.forEach((todo, index) => {\n        todoList.push(<TodoItem key={index} index={index} todo={todo} />);\n    });\n\n    return (\n        <Fragment>\n            <div className=\"todoListWrapper\">\n                <ul>{todoList}</ul>\n            </div>\n\n            <TodoFilters\n                todos={filteredTodos}\n                currentFilter={state.filter}\n                filterResultsFn={filterResults}\n                clearCompletedFn={clearCompleted}\n                clearInProgress={state.clearInProgress}\n            />\n        </Fragment>\n    );\n};\n\nconst TodoPrivateListQuery = () => {\n    const { loading, error, data } = useQuery(GET_MY_TODOS);\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return <TodoPrivateList todos={data.todos} />;\n};\n\nexport default TodoPrivateListQuery;\nexport { GET_MY_TODOS };\n","import React, { useState } from 'react';\nimport gql from 'graphql-tag';\nimport { useMutation } from '@apollo/react-hooks';\nimport { GET_MY_TODOS } from './TodoPrivateList';\n\n// Gouls for this component\n// Make a mutation to insert the new todo in the database.\n// Once the mutation is done, we need to update the cache to update the UI.\n\nconst ADD_TODO = gql`\n    mutation($todo: String!, $isPublic: Boolean!) {\n        insert_todos(objects: { title: $todo, is_public: $isPublic }) {\n            affected_rows\n            returning {\n                id\n                title\n                created_at\n                is_completed\n            }\n        }\n    }\n`;\nconst TodoInput = ({ isPublic = false }) => {\n    let input;\n    const [todoInput, setTodoInput] = useState('');\n    const updateCache = (cache, { data }) => {\n        // If this is for the public feed, do nothing\n        if (isPublic) {\n            return null;\n        }\n        // Fetch the todos from the cache\n        const existingTodos = cache.readQuery({\n            query: GET_MY_TODOS,\n        });\n        // Add the new todo to the cache\n        const newTodo = data.insert_todos.returning[0];\n        cache.writeQuery({\n            query: GET_MY_TODOS,\n            data: { todos: [newTodo, ...existingTodos.todos] },\n        });\n    };\n    const resetInput = () => {\n        setTodoInput('');\n    };\n    const [addTodo] = useMutation(ADD_TODO, {\n        update: updateCache,\n        onCompleted: resetInput,\n    });\n    return (\n        <form\n            className=\"formInput\"\n            onSubmit={e => {\n                e.preventDefault();\n                addTodo({ variables: { todo: todoInput, isPublic } });\n            }}\n        >\n            <input\n                className=\"input\"\n                placeholder=\"What needs to be done?\"\n                value={todoInput}\n                onChange={e => setTodoInput(e.target.value)}\n                ref={n => (input = n)}\n                required\n            />\n            <i className=\"inputMarker fa fa-angle-right\" />\n        </form>\n    );\n};\n\nexport default TodoInput;\n","import React from 'react';\n\nimport TodoInput from './TodoInput';\nimport TodoPrivateList from './TodoPrivateList';\n\nconst TodoPrivateWrapper = () => {\n    return (\n        <div className=\"todoWrapper\">\n            <div className=\"sectionHeader\">Personal todos</div>\n\n            <TodoInput />\n            <TodoPrivateList />\n        </div>\n    );\n};\n\nexport default TodoPrivateWrapper;\n","import React from 'react';\n\nconst TaskItem = ({ index, todo }) => {\n    return (\n        <li>\n            <div className=\"userInfoPublic\" title={todo.user.name}>\n                @{todo.user.name}\n            </div>\n\n            <div\n                className={\n                    'labelContent' + (todo.is_completed ? ' completed' : '')\n                }\n            >\n                <div>{todo.title}</div>\n            </div>\n        </li>\n    );\n};\n\nexport default TaskItem;\n","import React, { Fragment, useState, useEffect } from 'react';\nimport { useSubscription, useApolloClient } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport TaskItem from './TaskItem';\n\nconst TodoPublicList = props => {\n    const [state, setState] = useState({\n        olderTodosAvailable: props.latestTodo ? true : false,\n        newTodosCount: 0,\n        error: false,\n        todos: [],\n    });\n\n    let numTodos = state.todos.length;\n    let oldestTodoId = numTodos\n        ? state.todos[numTodos - 1].id\n        : props.latestTodo\n            ? props.latestTodo.id + 1\n            : 0;\n    let newestTodoId = numTodos\n        ? state.todos[0].id\n        : props.latestTodo\n            ? props.latestTodo.id\n            : 0;\n\n    const client = useApolloClient();\n\n    useEffect(() => {\n        loadOlder();\n    }, []);\n\n    useEffect(\n        () => {\n            if (props.latestTodo && props.latestTodo.id > newestTodoId) {\n                setState(prevState => {\n                    return {\n                        ...prevState,\n                        newTodosCount: prevState.newTodosCount + 1,\n                    };\n                });\n                newestTodoId = props.latestTodo.id;\n            }\n        },\n        [props.latestTodo]\n    );\n\n    const loadOlder = async () => {\n        const GET_OLD_PUBLIC_TODOS = gql`\n            query getOldPublicTodos($oldestTodoId: Int!) {\n                todos(\n                    where: {\n                        is_public: { _eq: true }\n                        id: { _lt: $oldestTodoId }\n                    }\n                    limit: 7\n                    order_by: { created_at: desc }\n                ) {\n                    id\n                    title\n                    created_at\n                    user {\n                        name\n                    }\n                }\n            }\n        `;\n\n        const { error, data } = await client.query({\n            query: GET_OLD_PUBLIC_TODOS,\n            variables: { oldestTodoId: oldestTodoId },\n        });\n\n        if (data.todos.length) {\n            setState(prevState => {\n                return {\n                    ...prevState,\n                    todos: [...prevState.todos, ...data.todos],\n                };\n            });\n            oldestTodoId = data.todos[data.todos.length - 1].id;\n        } else {\n            setState(prevState => {\n                return { ...prevState, olderTodosAvailable: false };\n            });\n        }\n        if (error) {\n            console.error(error);\n            setState(prevState => {\n                return { ...prevState, error: true };\n            });\n        }\n    };\n\n    const loadNew = async () => {\n        const GET_NEW_PUBLIC_TODOS = gql`\n            query getNewPublicTodos($latestVisibleId: Int) {\n                todos(\n                    where: {\n                        is_public: { _eq: true }\n                        id: { _gt: $latestVisibleId }\n                    }\n                    order_by: { created_at: desc }\n                ) {\n                    id\n                    title\n                    created_at\n                    user {\n                        name\n                    }\n                }\n            }\n        `;\n\n        const { error, data } = await client.query({\n            query: GET_NEW_PUBLIC_TODOS,\n            variables: {\n                latestVisibleId: state.todos.length ? state.todos[0].id : null,\n            },\n        });\n\n        if (data) {\n            setState(prevState => {\n                return {\n                    ...prevState,\n                    todos: [...data.todos, ...prevState.todos],\n                    newTodosCount: 0,\n                };\n            });\n            newestTodoId = data.todos[0].id;\n        }\n        if (error) {\n            console.error(error);\n            setState(prevState => {\n                return { ...prevState, error: true };\n            });\n        }\n    };\n\n    return (\n        <Fragment>\n            <div className=\"todoListWrapper\">\n                {state.newTodosCount !== 0 && (\n                    <div className={'loadMoreSection'} onClick={loadNew}>\n                        New tasks have arrived! (\n                        {state.newTodosCount.toString()})\n                    </div>\n                )}\n\n                <ul>\n                    {state.todos &&\n                        state.todos.map((todo, index) => {\n                            return (\n                                <TaskItem\n                                    key={index}\n                                    index={index}\n                                    todo={todo}\n                                />\n                            );\n                        })}\n                </ul>\n\n                <div className={'loadMoreSection'} onClick={loadOlder}>\n                    {state.olderTodosAvailable\n                        ? 'Load older tasks'\n                        : 'No more public tasks!'}\n                </div>\n            </div>\n        </Fragment>\n    );\n};\n\n// Run a subscription to get the latest public todo\nconst NOTIFY_NEW_PUBLIC_TODOS = gql`\n    subscription notifyNewPublicTodos {\n        todos(\n            where: { is_public: { _eq: true } }\n            limit: 1\n            order_by: { created_at: desc }\n        ) {\n            id\n            created_at\n        }\n    }\n`;\n\nconst TodoPublicListSubscription = () => {\n    const { loading, error, data } = useSubscription(NOTIFY_NEW_PUBLIC_TODOS);\n    if (loading) {\n        return <span>Loading...</span>;\n    }\n    if (error) {\n        return <span>Error</span>;\n    }\n    return (\n        <TodoPublicList latestTodo={data.todos.length ? data.todos[0] : null} />\n    );\n};\nexport default TodoPublicListSubscription;\n","import React from 'react';\n\nimport TodoInput from './TodoInput';\nimport TodoPublicList from './TodoPublicList';\n\nconst TodoPublicWrapper = () => {\n    return (\n        <div className=\"todoWrapper\">\n            <div className=\"sectionHeader\">Public feed (realtime)</div>\n\n            <TodoInput isPublic />\n            <TodoPublicList />\n        </div>\n    );\n};\n\nexport default TodoPublicWrapper;\n","import React from 'react';\n\nconst OnlineUser = ({ user }) => {\n    return (\n        <div className=\"userInfo\">\n            <div className=\"userImg\">\n                <i className=\"far fa-user\" />\n            </div>\n            <div className=\"userName\">{user.name}</div>\n        </div>\n    );\n};\n\nexport default OnlineUser;\n","import React, { useEffect, Fragment, useState } from 'react';\nimport { useMutation, useSubscription } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport OnlineUser from './OnlineUser';\n\nconst OnlineUsersWrapper = () => {\n    const [onlineIndicator, setOnlineIndicator] = useState(0);\n    let onlineUsersList;\n    useEffect(() => {\n        // Every 30s, run a mutation to tell the backend that you're online\n        updateLastSeen();\n        setOnlineIndicator(setInterval(() => updateLastSeen(), 30000));\n        return () => {\n            // Clean up\n            clearInterval(onlineIndicator);\n        };\n    }, []);\n    const UPDATE_LASTSEEN_MUTATION = gql`\n        mutation updateLastSeen($now: timestamptz!) {\n            update_users(where: {}, _set: { last_seen: $now }) {\n                affected_rows\n            }\n        }\n    `;\n    const [updateLastSeenMutation] = useMutation(UPDATE_LASTSEEN_MUTATION);\n    const updateLastSeen = () => {\n        // Use the apollo client to run a mutation to update the last_seen value\n        updateLastSeenMutation({\n            variables: { now: new Date().toISOString() },\n        });\n    };\n\n    const { loading, error, data } = useSubscription(\n        gql`\n            subscription getOnlineUsers {\n                online_users(order_by: { user: { name: asc } }) {\n                    id\n                    user {\n                        name\n                    }\n                }\n            }\n        `\n    );\n\n    if (loading) {\n        return <span>Loading...</span>;\n    }\n    if (error) {\n        console.error(error);\n        return <span>Error!</span>;\n    }\n    if (data) {\n        onlineUsersList = data.online_users.map(u => (\n            <OnlineUser key={u.id} user={u.user} />\n        ));\n    }\n\n    return (\n        <div className=\"onlineUsersWrapper\">\n            <Fragment>\n                <div className=\"sliderHeader\">\n                    Online users - {onlineUsersList.length}\n                </div>\n                {onlineUsersList}\n            </Fragment>\n        </div>\n    );\n};\n\nexport default OnlineUsersWrapper;\n","import React from 'react';\nimport Header from './Header';\nimport TodoPrivateWrapper from './Todo/TodoPrivateWrapper';\nimport TodoPublicWrapper from './Todo/TodoPublicWrapper';\nimport OnlineUsersWrapper from './OnlineUsers/OnlineUsersWrapper';\n\nimport { useAuth0 } from './Auth/react-auth0-spa';\nimport ApolloClient from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { WebSocketLink } from 'apollo-link-ws';\nimport { ApolloProvider } from '@apollo/react-hooks';\n\nconst createApolloClient = authToken => {\n    return new ApolloClient({\n        link: new WebSocketLink({\n            uri: 'wss://hasura.io/learn/graphql',\n            options: {\n                reconnect: true,\n                connectionParams: {\n                    headers: {\n                        Authorization: `Bearer ${authToken}`,\n                    },\n                },\n            },\n        }),\n        cache: new InMemoryCache(),\n    });\n};\nconst App = ({ idToken }) => {\n    const { loading, logout } = useAuth0();\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n    const client = createApolloClient(idToken);\n    return (\n        <ApolloProvider client={client}>\n            <Header logoutHandler={logout} />\n            <div className=\"row container-fluid p-left-right-0 m-left-right-0\">\n                <div className=\"row col-md-9 p-left-right-0 m-left-right-0\">\n                    <div className=\"col-md-6 sliderMenu p-30\">\n                        <TodoPrivateWrapper />\n                    </div>\n                    <div className=\"col-md-6 sliderMenu p-30 bg-gray border-right\">\n                        <TodoPublicWrapper />\n                    </div>\n                </div>\n                <div className=\"col-md-3 p-left-right-0\">\n                    <div className=\"col-md-12 sliderMenu p-30 bg-gray\">\n                        <OnlineUsersWrapper />\n                    </div>\n                </div>\n            </div>\n        </ApolloProvider>\n    );\n};\n\nexport default App;\n","import React, { useState, useEffect, useContext } from 'react';\nimport createAuth0Client from '@auth0/auth0-spa-js';\nimport Callback from './Callback';\nimport Login from './Login';\nimport App from '../App';\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n    window.history.replaceState({}, document.title, window.location.pathname);\n\nexport const Auth0Context = React.createContext();\nexport const useAuth0 = () => useContext(Auth0Context);\nexport const Auth0Provider = ({\n    children,\n    onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n    ...initOptions\n}) => {\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [user, setUser] = useState();\n    const [auth0Client, setAuth0] = useState();\n    const [loading, setLoading] = useState(true);\n    const [popupOpen, setPopupOpen] = useState(false);\n    const [idToken, setIdToken] = useState('');\n\n    useEffect(() => {\n        const initAuth0 = async () => {\n            const auth0FromHook = await createAuth0Client(initOptions);\n            setAuth0(auth0FromHook);\n\n            if (window.location.search.includes('code=')) {\n                const {\n                    appState,\n                } = await auth0FromHook.handleRedirectCallback();\n                onRedirectCallback(appState);\n            }\n\n            const isAuthenticated = await auth0FromHook.isAuthenticated();\n\n            setIsAuthenticated(isAuthenticated);\n\n            if (isAuthenticated) {\n                const user = await auth0FromHook.getUser();\n                setUser(user);\n                const idTokenClaims = await auth0FromHook.getIdTokenClaims();\n                setIdToken(idTokenClaims.__raw);\n            }\n\n            setLoading(false);\n        };\n        initAuth0();\n        // eslint-disable-next-line\n    }, []);\n\n    const loginWithPopup = async (params = {}) => {\n        setPopupOpen(true);\n        try {\n            await auth0Client.loginWithPopup(params);\n        } catch (error) {\n            console.error(error);\n        } finally {\n            setPopupOpen(false);\n        }\n        const user = await auth0Client.getUser();\n        setUser(user);\n        setIsAuthenticated(true);\n    };\n\n    const handleRedirectCallback = async () => {\n        setLoading(true);\n        const result = await auth0Client.handleRedirectCallback();\n        const user = await auth0Client.getUser();\n        const idTokenClaims = await auth0Client.getIdTokenClaims();\n        setIdToken(idTokenClaims.__raw);\n\n        setLoading(false);\n        setIsAuthenticated(true);\n        setUser(user);\n        return result;\n    };\n\n    if (loading) {\n        return <Callback />;\n    }\n    if (!isAuthenticated) {\n        return (\n            <Auth0Context.Provider\n                value={{\n                    isAuthenticated,\n                    user,\n                    loading,\n                    popupOpen,\n                    loginWithPopup,\n                    handleRedirectCallback,\n                    getIdTokenClaims: (...p) =>\n                        auth0Client.getIdTokenClaims(...p),\n                    loginWithRedirect: (...p) =>\n                        auth0Client.loginWithRedirect(...p),\n                    getTokenSilently: (...p) =>\n                        auth0Client.getTokenSilently(...p),\n                    getTokenWithPopup: (...p) =>\n                        auth0Client.getTokenWithPopup(...p),\n                    logout: (...p) => auth0Client.logout(...p),\n                }}\n            >\n                <Login />\n            </Auth0Context.Provider>\n        );\n    }\n\n    return (\n        <Auth0Context.Provider\n            value={{\n                isAuthenticated,\n                user,\n                loading,\n                popupOpen,\n                loginWithPopup,\n                handleRedirectCallback,\n                getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n                loginWithRedirect: (...p) =>\n                    auth0Client.loginWithRedirect(...p),\n                getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n                getTokenWithPopup: (...p) =>\n                    auth0Client.getTokenWithPopup(...p),\n                logout: (...p) => auth0Client.logout(...p),\n            }}\n        >\n            {children}\n            <App idToken={idToken} />\n        </Auth0Context.Provider>\n    );\n};\n","import { createBrowserHistory } from 'history';\nexport default createBrowserHistory();\n","export const AUTH_CONFIG = {\n    domain: 'graphql-tutorials.auth0.com',\n    clientId: 'P38qnFo1lFAQJrzkun--wEzqljVNGcWW',\n    callbackUrl: 'http://localhost:3000/callback',\n};\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport { Route, Router } from 'react-router-dom';\n\nimport './styles/App.css';\n\nimport { Auth0Provider } from './components/Auth/react-auth0-spa';\nimport history from './utils/history';\nimport { AUTH_CONFIG } from './components/Auth/auth0-variables';\n\nconst onRedirectCallback = appState => {\n    history.push(\n        appState && appState.targetUrl\n            ? appState.targetUrl\n            : window.location.pathname\n    );\n};\n\nconst mainRoutes = (\n    <Router history={history}>\n        <Route\n            path=\"/\"\n            render={() => (\n                <Auth0Provider\n                    domain={AUTH_CONFIG.domain}\n                    client_id={AUTH_CONFIG.clientId}\n                    redirect_uri={AUTH_CONFIG.callbackUrl}\n                    onRedirectCallback={onRedirectCallback}\n                />\n            )}\n        />\n    </Router>\n);\n\nReactDOM.render(mainRoutes, document.getElementById('root'));\n"],"sourceRoot":""}